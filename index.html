<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen"/>
  <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Pastyclient-node</title>
  <meta name="description" content="npm module to build your own Pasty client">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Pastyclient-node</h1>
    </header>
    <div id="container">
      <p class="tagline">npm module to build your own Pasty client</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/ElectricDynamite/pastyclient-node/tarball/master" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/ElectricDynamite/pastyclient-node/zipball/master" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/ElectricDynamite/pastyclient-node" class="code">View Pastyclient-node on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <h1>pastyclient-node</h1>

<p>Module to build your own <a href="http://www.pastyapp.org/">Pasty</a> client.</p>

<p>More information at <a href="http://www.pastyapp.org/">http://www.pastyapp.org/</a>  </p>

<p><img src="http://pastyapp.org/images/Pasty_256x256.png" alt="Pasty Logo"></p>

<h2>Installation</h2>

<h3>Installing npm (node package manager)</h3>

<p><code>curl http://npmjs.org/install.sh | sh</code>  </p>

<h3>Installing pastyclient-node</h3>

<p><code>npm install pastyclient-node</code></p>

<h3>Installing pastyclient-node globally</h3>

<p><code>[sudo] npm install -g pastyclient-node</code></p>

<h2>How to use</h2>

<p>pastyclient-node is a small library that will handle the REST calls to the <a href="https://github.com/ElectricDynamite/pasty-server">Pasty REST API server</a> for you.
 Currently it does not offer any option to store user credentials withing the client library, so you need to store these within your application and provide
 them upon each REST call.  </p>

<p>While pastyclient-node will take care of the REST calls, you should still be familiar with <a href="https://github.com/ElectricDynamite/pasty-server/wiki/REST-API">Pasty's REST API</a>.</p>

<h3>General</h3>

<p>You always need to create your pastyclient by requiring the module and calling the pastyclient factory <code>pastyclient()</code>:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pastyclient-node'</span><span class="p">).</span><span class="nx">pastyclient</span><span class="p">(</span>
    <span class="s1">'api.pastyapp.org'</span>
  <span class="p">,</span> <span class="mi">443</span>
  <span class="p">,</span> <span class="p">{</span> <span class="s2">"ssl"</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
</pre>
</div>


<p>The factory take three arguments. The first argument is the REST servers <code>hostname</code>, the second is the REST servers TCP <code>port</code>.<br>
 The third argument is an <code>options</code> object, that currently takes any of the following values:  </p>

<ul>
<li>"ssl": A boolean indicating whether or not the server will talk SSL/TLS.</li>
<li>
<p>"apiKey": If you have an API key for the REST server (in order to create users) you can specify it here as a string.</p>

<p>After creating receiving your configured client from the factory, you can start using it. Keep your Pasty login data at hand.</p>
</li>
</ul><h3>Getting the user clipboard</h3>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pastyclient-node'</span><span class="p">).</span><span class="nx">pastyclient</span><span class="p">(</span>
    <span class="s1">'api.pastyapp.org'</span>
  <span class="p">,</span> <span class="mi">443</span>
  <span class="p">,</span> <span class="p">{</span> <span class="s2">"ssl"</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="s1">'&lt;username&gt;'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="s1">'&lt;password&gt;'</span><span class="p">;</span>

<span class="c1">// call the REST server for the users clipboard</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">listItems</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">E</span><span class="p">,</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">E</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// if no error occured</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">items</span><span class="p">);</span>  <span class="c1">// dump the items to console</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error:"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">E</span><span class="p">);</span> <span class="c1">// display any error</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre>
</div>


<h3>Adding an item to the user clipboard</h3>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pastyclient-node'</span><span class="p">).</span><span class="nx">pastyclient</span><span class="p">(</span>
    <span class="s1">'api.pastyapp.org'</span>
  <span class="p">,</span> <span class="mi">443</span>
  <span class="p">,</span> <span class="p">{</span> <span class="s2">"ssl"</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="s1">'&lt;username&gt;'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="s1">'&lt;password&gt;'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="s2">"what a pretty string this is"</span><span class="p">;</span>

<span class="c1">// call the REST server to add the item</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">addItem</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">E</span><span class="p">,</span> <span class="nx">itemId</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">E</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// if no error occured</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">itemId</span><span class="p">);</span>  <span class="c1">// dump the newly created items id to console</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error:"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">E</span><span class="p">);</span> <span class="c1">// display any error</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre>
</div>


<h3>Deleting an item from the user clipboard</h3>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pastyclient-node'</span><span class="p">).</span><span class="nx">pastyclient</span><span class="p">(</span>
    <span class="s1">'api.pastyapp.org'</span>
  <span class="p">,</span> <span class="mi">443</span>
  <span class="p">,</span> <span class="p">{</span> <span class="s2">"ssl"</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="s1">'&lt;username&gt;'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="s1">'&lt;password&gt;'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">itemId</span> <span class="o">=</span> <span class="s2">"4fc660923120c0790e000002"</span><span class="p">;</span>

<span class="c1">// call the REST server to delete the item with id &lt;itemId&gt;</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">deleteItem</span><span class="p">(</span><span class="nx">itemId</span><span class="p">,</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">E</span><span class="p">,</span> <span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">E</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// if no error occured</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">success</span><span class="p">);</span>  <span class="c1">// success will contain true</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error:"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">E</span><span class="p">);</span> <span class="c1">// display any error</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre>
</div>


<h3>Requesting a user token</h3>

<p>Since the <a href="https://github.com/ElectricDynamite/pasty-server/wiki/REST-API">Pasty REST API</a> 
 does currently not support OAuth, there is a miserable work around to keep from
 sending the users credentials over the Internet all the time, and that is user tokens.</p>

<p>You can request a user token using the <code>requestToken()</code> function, and then use this
 token instead of username / password in future clipboard calls. To do that, you 
 simply replace the username and the password parameter with a single string parameter
 containing the token.</p>

<p>Here is an example:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pastyclient-node'</span><span class="p">).</span><span class="nx">pastyclient</span><span class="p">(</span>
    <span class="s1">'api.pastyapp.org'</span>
  <span class="p">,</span> <span class="mi">443</span>
  <span class="p">,</span> <span class="p">{</span> <span class="s2">"ssl"</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="kd">var</span> <span class="nx">username</span> <span class="o">=</span> <span class="s1">'&lt;username&gt;'</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="s1">'&lt;password&gt;'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="s2">"what a pretty string this is"</span><span class="p">;</span>

<span class="c1">// call the REST server to request a user token</span>
<span class="nx">client</span><span class="p">.</span><span class="nx">requestToken</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">E</span><span class="p">,</span> <span class="nx">tokenInfo</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">E</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// if no error occured</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">tokenInfo</span><span class="p">);</span> <span class="c1">// let's see how the token info looks</span>

    <span class="c1">// call the REST server to add the item</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">addItem</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">tokenInfo</span><span class="p">.</span><span class="nx">token</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">E</span><span class="p">,</span> <span class="nx">itemId</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">E</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// if no error occured</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">itemId</span><span class="p">);</span>  <span class="c1">// dump the newly created items id to console</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error:"</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">E</span><span class="p">);</span> <span class="c1">// display any error</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Error:"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">E</span><span class="p">);</span> <span class="c1">// display any error</span>
  <span class="p">}</span>
<span class="p">});</span>

</pre>
</div>


<h3>More</h3>

<p>There is more that you can do with the library and Pasty. Please have a look 
 into the source code, for the following function calls:</p>

<ul>
<li>getServerVersion()</li>
<li>getItem()</li>
<li>getUser()</li>
<li>createUser()</li>
<li>updateUserPassword()</li>
<li>deleteUser()</li>
<li>
<p>checkTokenValidity()</p>

<p>They are pretty straight forward and fairly documented.</p>
</li>
</ul><h2>Contact</h2>

<p>Please direct your questions and suggestions to <a href="mailto:electricdynamite.apps@gmail.com">electricdynamite.apps@gmail.com</a></p>

<h2>License</h2>

<p>Copyright 2012 Philipp Geschke</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.</p>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/ElectricDynamite" class="avatar"><img src="https://secure.gravatar.com/avatar/bf87b8d98220835eaaa9a58a680e1b62?s=30&amp;d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png" width="48" height="48"/></a> <a href="https://github.com/ElectricDynamite">ElectricDynamite</a> maintains <a href="https://github.com/ElectricDynamite/pastyclient-node">Pastyclient-node</a></p>
      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br/>theme by <a href="http://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/ElectricDynamite/pastyclient-node/tarball/master" class="tar">tar</a><a href="https://github.com/ElectricDynamite/pastyclient-node/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
